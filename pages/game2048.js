webpackJsonp([0],{0:function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){if("web"==p.OS){var t=e.nativeEvent.changedTouches[0];return{pageX:t.pageX,pageY:t.pageY}}return{pageX:e.nativeEvent.pageX,pageY:e.nativeEvent.pageY}}var l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=o(1),u=s.AppRegistry,c=s.StyleSheet,h=s.Text,f=s.View,p=s.Platform,d=o(190),m=o(423),y=o(424),b=3,v=4,g=60,w=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return s.createElement(f,{style:k.cell})}}]),t}(s.Component),E=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return s.createElement(f,{style:k.board},s.createElement(f,{style:k.row},s.createElement(w,null),s.createElement(w,null),s.createElement(w,null),s.createElement(w,null)),s.createElement(f,{style:k.row},s.createElement(w,null),s.createElement(w,null),s.createElement(w,null),s.createElement(w,null)),s.createElement(f,{style:k.row},s.createElement(w,null),s.createElement(w,null),s.createElement(w,null),s.createElement(w,null)),s.createElement(f,{style:k.row},s.createElement(w,null),s.createElement(w,null),s.createElement(w,null),s.createElement(w,null)),this.props.children)}}]),t}(s.Component),P=function(e){function t(e){n(this,t);var o=r(this,Object.getPrototypeOf(t).call(this,e)),i=o.props.tile;return o.state={opacity:new d.Value(0),top:new d.Value(t._getPosition(i.toRow())),left:new d.Value(t._getPosition(i.toColumn()))},o}return i(t,e),l(t,null,[{key:"_getPosition",value:function(e){return b+(e*(g+2*v)+v)}}]),l(t,[{key:"calculateOffset",value:function(){var e=this.props.tile,o={top:this.state.top,left:this.state.left,opacity:this.state.opacity};return e.isNew()?d.timing(this.state.opacity,{duration:100,toValue:1}).start():d.parallel([d.timing(o.top,{duration:100,toValue:t._getPosition(e.toRow())}),d.timing(o.left,{duration:100,toValue:t._getPosition(e.toColumn())})]).start(),o}},{key:"render",value:function(){var e=this.props.tile,t=[k.tile,k["tile"+e.value],this.calculateOffset()],o=[k.value,e.value>4&&k.whiteText,e.value>100&&k.threeDigits,e.value>1e3&&k.fourDigits];return s.createElement(d.View,{style:t},s.createElement(h,{style:o},e.value))}}]),t}(s.Component),T=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.board;if(!e.hasWon()&&!e.hasLost())return s.createElement(f,null);var t=e.hasWon()?"Good Job!":"Game Over";return s.createElement(f,{style:k.overlay},s.createElement(h,{style:k.overlayMessage},t),s.createElement(y,{onPress:this.props.onRestart,style:k.tryAgain},s.createElement(h,{style:k.tryAgainText},"Try Again?")))}}]),t}(s.Component),C=function(e){function t(e){n(this,t);var o=r(this,Object.getPrototypeOf(t).call(this,e));return o.state={board:new m},o.startX=0,o.startY=0,o}return i(t,e),l(t,[{key:"restartGame",value:function(){this.setState({board:new m})}},{key:"handleTouchStart",value:function(e){if(!this.state.board.hasWon()){var t=a(e);this.startX=t.pageX,this.startY=t.pageY}}},{key:"handleTouchEnd",value:function(e){if(!this.state.board.hasWon()){var t=a(e),o=t.pageX-this.startX,n=t.pageY-this.startY,r=-1;Math.abs(o)>3*Math.abs(n)&&Math.abs(o)>30?r=o>0?2:0:Math.abs(n)>3*Math.abs(o)&&Math.abs(n)>30&&(r=n>0?3:1),-1!==r&&this.setState({board:this.state.board.move(r)})}}},{key:"render",value:function(){var e=this,t=this.state.board.tiles.filter(function(e){return e.value}).map(function(e){return s.createElement(P,{ref:e.id,key:e.id,tile:e})});return s.createElement(f,{style:k.container,onTouchStart:function(t){return e.handleTouchStart(t)},onTouchEnd:function(t){return e.handleTouchEnd(t)}},s.createElement(E,null,t),s.createElement(T,{board:this.state.board,onRestart:function(){return e.restartGame()}}))}}]),t}(s.Component),k=c.create({container:{flex:1,justifyContent:"center",alignItems:"center"},board:{padding:b,backgroundColor:"#bbaaaa",borderRadius:5},overlay:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(221, 221, 221, 0.5)",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center"},overlayMessage:{fontSize:40,marginBottom:20},tryAgain:{backgroundColor:"#887766",padding:20,borderRadius:5},tryAgainText:{color:"#ffffff",fontSize:20,fontWeight:"500"},cell:{width:g,height:g,borderRadius:5,backgroundColor:"#ddccbb",margin:v},row:{flexDirection:"row"},tile:{position:"absolute",width:g,height:g,backgroundColor:"#ddccbb",borderRadius:5,flex:1,justifyContent:"center",alignItems:"center"},value:{fontSize:24,color:"#776666",fontFamily:"Verdana",fontWeight:"500"},tile2:{backgroundColor:"#eeeeee"},tile4:{backgroundColor:"#eeeecc"},tile8:{backgroundColor:"#ffbb88"},tile16:{backgroundColor:"#ff9966"},tile32:{backgroundColor:"#ff7755"},tile64:{backgroundColor:"#ff5533"},tile128:{backgroundColor:"#eecc77"},tile256:{backgroundColor:"#eecc66"},tile512:{backgroundColor:"#eecc55"},tile1024:{backgroundColor:"#eecc33"},tile2048:{backgroundColor:"#eecc22"},whiteText:{color:"#ffffff"},threeDigits:{fontSize:20},fourDigits:{fontSize:18}});if(u.registerComponent("Game2048",function(){return C}),"web"==p.OS){var R=document.createElement("div");document.body.appendChild(R),u.runApplication("Game2048",{rootTag:R})}e.exports=C},423:function(e,t){"use strict";var o=function(e){for(var t=e.length,o=e[0].length,n=[],r=0;t>r;++r){n.push([]);for(var i=0;o>i;++i)n[r][i]=e[i][o-r-1]}return n},n=function i(e,t,o){this.value=e||0,this.row=t||-1,this.column=o||-1,this.oldRow=-1,this.oldColumn=-1,this.markForDeletion=!1,this.mergedInto=null,this.id=i.id++};n.id=0,n.prototype.moveTo=function(e,t){this.oldRow=this.row,this.oldColumn=this.column,this.row=e,this.column=t},n.prototype.isNew=function(){return-1===this.oldRow&&!this.mergedInto},n.prototype.hasMoved=function(){return-1!==this.fromRow()&&(this.fromRow()!==this.toRow()||this.fromColumn()!==this.toColumn())||this.mergedInto},n.prototype.fromRow=function(){return this.mergedInto?this.row:this.oldRow},n.prototype.fromColumn=function(){return this.mergedInto?this.column:this.oldColumn},n.prototype.toRow=function(){return this.mergedInto?this.mergedInto.row:this.row},n.prototype.toColumn=function(){return this.mergedInto?this.mergedInto.column:this.column};var r=function a(){this.tiles=[],this.cells=[];for(var e=0;e<a.size;++e)this.cells[e]=[this.addTile(),this.addTile(),this.addTile(),this.addTile()];this.addRandomTile(),this.setPositions(),this.won=!1};r.prototype.addTile=function(){var e=new n;return n.apply(e,arguments),this.tiles.push(e),e},r.size=4,r.prototype.moveLeft=function(){for(var e=!1,t=0;t<r.size;++t){for(var o=this.cells[t].filter(function(e){return 0!==e.value}),n=[],i=0;i<r.size;++i){var a=o.length?o.shift():this.addTile();if(o.length>0&&o[0].value===a.value){var l=a;a=this.addTile(a.value),l.mergedInto=a;var s=o.shift();s.mergedInto=a,a.value+=s.value}n[i]=a,this.won=this.won||2048===a.value,e=e||a.value!==this.cells[t][i].value}this.cells[t]=n}return e},r.prototype.setPositions=function(){this.cells.forEach(function(e,t){e.forEach(function(e,o){e.oldRow=e.row,e.oldColumn=e.column,e.row=t,e.column=o,e.markForDeletion=!1})})},r.fourProbability=.1,r.prototype.addRandomTile=function(){for(var e=[],t=0;t<r.size;++t)for(var o=0;o<r.size;++o)0===this.cells[t][o].value&&e.push({r:t,c:o});var n=Math.floor(Math.random()*e.length),i=e[n],a=Math.random()<r.fourProbability?4:2;this.cells[i.r][i.c]=this.addTile(a)},r.prototype.move=function(e){this.clearOldTiles();for(var t=0;e>t;++t)this.cells=o(this.cells);for(var n=this.moveLeft(),t=e;4>t;++t)this.cells=o(this.cells);return n&&this.addRandomTile(),this.setPositions(),this},r.prototype.clearOldTiles=function(){this.tiles=this.tiles.filter(function(e){return e.markForDeletion===!1}),this.tiles.forEach(function(e){e.markForDeletion=!0})},r.prototype.hasWon=function(){return this.won},r.deltaX=[-1,0,1,0],r.deltaY=[0,-1,0,1],r.prototype.hasLost=function(){for(var e=!1,t=0;t<r.size;++t)for(var o=0;o<r.size;++o){e=e||0===this.cells[t][o].value;for(var n=0;4>n;++n){var i=t+r.deltaX[n],a=o+r.deltaY[n];0>i||i>=r.size||0>a||a>=r.size||(e=e||this.cells[t][o].value===this.cells[i][a].value)}}return!e},e.exports=r},424:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(190),c=n(u),h=o(2),f=n(h),p=o(279),d=o(185),m=n(d),y=o(188),b=n(y),v={top:20,left:20,right:20,bottom:30},g=function(e){function t(){var e,o,n,a;r(this,t);for(var s=arguments.length,u=Array(s),h=0;s>h;h++)u[h]=arguments[h];return o=n=i(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.state=l({},n.touchableGetInitialState(),{scale:new c["default"].Value(1)}),a=o,i(n,a)}return a(t,e),s(t,[{key:"bounceTo",value:function(e,t,o,n){c["default"].spring(this.state.scale,{toValue:e,velocity:t,bounciness:o}).start(n)}},{key:"touchableHandleActivePressIn",value:function(e){this.bounceTo(.93,.1,0),this.props.onPressIn&&this.props.onPressIn(e)}},{key:"touchableHandleActivePressOut",value:function(e){this.bounceTo(1,.4,0),this.props.onPressOut&&this.props.onPressOut(e)}},{key:"touchableHandlePress",value:function(e){var t=this,o=this.props.onPressWithCompletion;return o?void o(function(){t.state.scale.setValue(.93),t.bounceTo(1,10,10,t.props.onPressAnimationComplete)}):(this.bounceTo(1,10,10,this.props.onPressAnimationComplete),void(this.props.onPress&&this.props.onPress(e)))}},{key:"touchableGetPressRectOffset",value:function(){return v}},{key:"touchableGetHighlightDelayMS",value:function(){return 0}},{key:"render",value:function(){return f["default"].createElement(c["default"].View,{style:[{transform:[{scale:this.state.scale}]},this.props.style],accessible:!0,testID:this.props.testID,onStartShouldSetResponder:this.touchableHandleStartShouldSetResponder,onResponderTerminationRequest:this.touchableHandleResponderTerminationRequest,onResponderGrant:this.touchableHandleResponderGrant,onResponderMove:this.touchableHandleResponderMove,onResponderRelease:this.touchableHandleResponderRelease,onResponderTerminate:this.touchableHandleResponderTerminate},this.props.children)}}]),t}(h.Component);g.propTypes={onPress:f["default"].PropTypes.func,onPressIn:f["default"].PropTypes.func,onPressOut:f["default"].PropTypes.func,onPressWithCompletion:f["default"].PropTypes.func,onPressAnimationComplete:f["default"].PropTypes.func},m["default"].onClass(g,p.Mixin),(0,b["default"])(g),e.exports=g}});
//# sourceMappingURL=game2048.js.map